---
layout: post
title:  "Recording and replaying terminal commands"
description: "How to record terminal commands and output so you can review your work, see what actually worked and share this online"
date:   2014-02-28 21:31:05
category: articles
description: "Recording the terminal with the script command and Asciinema."
tags: [cli, bash, history, script, asciinema]
comments: true
---

Going back over 
==================

Part of the reason for this blog is to help me document and keep track of things I learn. As part of the effort to do that I've messed around with different options for .bash_history.

I've increased the amount of commands stored by default, made sure multiple running sessions are recorded and so on.

Looking through your previous commands isn't always very useful though, especially when you make mistakes, run commands in the wrong order or just repeat commands to see if things change.

If you can't see whether or not the command was successful then looking back at a list of potentially incorrect commands isn't very helpful. People address this in a couple of ways. One is to edit your bash history as you go along - so if a command doesn't work you input another command to remove the failed attempt from your bash history. I can see the point to that but it still doesn't show you the result of the command, the output generated by the command input.

Enter the `script` command. 

This allows you to record the command input and resulting output that appears in the terminal to a file, or rather to two files.The first contains the commands and output, the second is a timing file - like timecode in a video or subtitles file.

{% highlight console %}
console
user@mycomputer ~$ script -t 2> testing.timing -a testing.session
{% endhighlight %}

The `>2` is just to speed things up a bit. Ctrl +D stops the recording. Replaying the recorded session is done as follows:

{% highlight console %}
user@mycomputer ~$ scriptreplay -t testing.timing testing.session
{% endhighlight %}

The nice thing about this is that you can decide to start recording when you're doing something new, and can check it out afterwards. You can also edit the log files to take out any extraneous commands or to substitute login names with something more innocuous and safe.

I would have thought it would be possible to record and replay from just one file but that doesn't seem to be possible. If you want to share with someone else you could just mail them the two files though that seems a little odd. For putting something up online probably a better idea is [asciinema](https://asciinema.org/). 'Inspired by' the Unix script command asciinema allows you to record what goes on in the terminal in a similar fashion and uploads it to asciinema.org from where it can be easily be embedded in websites. The text from these embeds can be copied which is cool but I don't think its possible to edit the recording. Recording is started and stopped with:

{% highlight console %}
user@mycomputer ~$ asciinema rec

user@mycomputer ~$ exit
{% endhighlight %}


I guess for the best of both worlds you could use `script`, edit it as required and then record the playback with asciinmea.

<script type="text/javascript" src="https://asciinema.org/a/7965.js" id="asciicast-7965" async data-size="small"></script>

Et voil√†!



